
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Simulador ENARM PUEP</title>
    <style>
        body { font-family: 'Open Sans', sans-serif; background: #f5f7fa; margin: 0; padding: 20px; }
        #quiz-container { background: #ffffff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); max-width: 800px; margin: auto; }
        button { margin: 10px 5px; padding: 10px 20px; font-size: 16px; border: none; border-radius: 5px; cursor: pointer; }
        button:first-of-type { background: #007bff; color: white; }
        button:last-of-type { background: #28a745; color: white; }
        #feedback { font-weight: bold; font-size: 18px; margin-top: 10px; }
        #justification { margin-top: 10px; background: #e7f3fe; padding: 10px; border-radius: 5px; }
        #counter { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
        input[type="radio"] { margin-right: 8px; }
    </style>
</head>
<body>
    <h1 style="text-align:center;">Simulador ENARM PUEP</h1>
    <div id="quiz-container">
        <p id="counter"></p>
        <p id="question"></p>
        <div id="options"></div>
        <button onclick="submitAnswer()">Responder</button>
        <button onclick="nextQuestion()">Saltar pregunta</button>
        <p id="feedback"></p>
        <p id="justification"></p>
    </div>
    <div id="result" style="display:none; text-align:center;"></div>

<script>
let questions = [];
fetch('simulador_completo.json')
    .then(response => response.json())
    .then(data => {
        questions = data;
        loadQuestion();
    });

let currentQuestion = 0;
let score = 0;
let answered = false;

function loadQuestion() {
    const q = questions[currentQuestion];
    document.getElementById('question').innerText = q.question;
    document.getElementById('options').innerHTML = '';
    document.getElementById('feedback').innerText = '';
    document.getElementById('justification').innerText = '';
    document.getElementById('counter').innerText = `Pregunta ${currentQuestion + 1} de ${questions.length}`;
    q.options.forEach(opt => {
        document.getElementById('options').innerHTML += `
            <label><input type="radio" name="option" value="${opt[0].toLowerCase()}"> ${opt}</label><br>`;
    });
    answered = false;
}

function submitAnswer() {
    if (answered) return;
    const selected = document.querySelector('input[name="option"]:checked');
    if (!selected) {
        alert('Selecciona una opción.');
        return;
    }
    const q = questions[currentQuestion];
    if (selected.value === q.correct) {
        document.getElementById('feedback').innerHTML = "✅ Correcto.";
        score++;
    } else {
        document.getElementById('feedback').innerHTML = "❌ Incorrecto.";
    }
    document.getElementById('justification').innerText = q.justification;
    answered = true;
}

function nextQuestion() {
    if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        loadQuestion();
    } else {
        showResult();
    }
}

function showResult() {
    document.getElementById('quiz-container').style.display = 'none';
    document.getElementById('result').style.display = 'block';
    const percent = ((score / questions.length) * 100).toFixed(2);
    document.getElementById('result').innerHTML = `<h2>Resultados</h2>
        <p>Correctas: ${score} / ${questions.length}</p>
        <p>Porcentaje de aciertos: ${percent}%</p>`;
}
</script>
</body>
</html>
    